// Generated by CoffeeScript 1.6.0
(function() {
  var domReady;

  domReady = function() {
    console.log('domReady');
    return new astro.FITS('lib/m101.fits', function(fits) {
      var dataunit;
      dataunit = fits.getDataUnit();
      return dataunit.getFrame(0, function(arr) {
        var c, conrec, data, height, i, index, j, row, width, z, _i, _j, _ref, _ref1;
        width = dataunit.width;
        height = dataunit.height;
        data = [];
        for (j = _i = 0, _ref = height - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; j = 0 <= _ref ? ++_i : --_i) {
          row = [];
          for (i = _j = 0, _ref1 = width - 1; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; i = 0 <= _ref1 ? ++_j : --_j) {
            index = j * width + i;
            row.push(arr[index]);
          }
          data.push(row);
        }
        z = [2396, 10332, 18267, 26203];
        conrec = new Conrec();
        conrec.contour(data, 0, data.length - 1, 0, data[0].length - 1, [data.length], [data[0].length], z.length, z);
        c = conrec.contourList();
        return console.log(c);
      });
    });
  };

  window.addEventListener('DOMContentLoaded', domReady, false);

}).call(this);
