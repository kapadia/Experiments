// Generated by CoffeeScript 1.6.0
(function() {
  var domReady, go;

  go = function() {
    var arr, i, index, j, nElements, size, subarray, subarrays, value, _i, _len, _results;
    console.log('go');
    size = 536870912;
    nElements = 4194304;
    arr = new Float32Array(size / 4);
    subarrays = [];
    i = j = 32;
    while (i--) {
      subarray = new Float32Array(nElements);
      for (index = _i = 0, _len = subarray.length; _i < _len; index = ++_i) {
        value = subarray[index];
        subarray[index] = Math.random();
      }
      subarrays.push(subarray);
    }
    _results = [];
    while (j--) {
      _results.push((function(j) {
        return setTimeout((function() {
          arr.set(subarrays[j], j * nElements);
          delete subarrays[j];
          if (j === 0) {
            return console.log(arr[0], subarrays);
          }
        }), 500);
      })(j));
    }
    return _results;
  };

  domReady = function() {
    var button;
    button = document.querySelector('h4');
    return button.onclick = function(e) {
      return go();
    };
  };

  window.addEventListener('DOMContentLoaded', domReady, false);

}).call(this);
