// Generated by CoffeeScript 1.6.0
(function() {
  var go;

  go = function(e) {
    var blob, fn, mime, onmessage, url, worker;
    onmessage = function(e) {
      var arr, data;
      arr = [1, 2, 3, 4];
      data = {
        arr: [1, 2, 3, 4],
        string: "" + e.data.str + ", yea we did!"
      };
      return postMessage(data);
    };
    fn = onmessage.toString().replace('return postMessage(data);', 'postMessage(data);');
    fn = "onmessage = " + fn;
    mime = "application/javascript";
    blob = new Blob([fn], {
      type: mime
    });
    url = URL.createObjectURL(blob);
    worker = new Worker(url);
    worker.onmessage = function(e) {
      var data;
      data = e.data;
      console.log(data);
      URL.revokeObjectURL(url);
      return worker.terminate();
    };
    return worker.postMessage({
      str: 'this is a string we pass to the worker'
    });
  };

  document.addEventListener('DOMContentLoaded', go, false);

}).call(this);
